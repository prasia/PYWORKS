<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to PYWORKS!</title>
    <link rel="icon" href="./images/heroimg.png">
    <link rel="stylesheet" href="./css/preview.css">
</head>
<body>
    <header>
        <!--Nav-->
        <div class = "nav container">
        <!--Logo-->
        <a href = "./main-page.html" class = "logo">PY<span>WORKS.</span></a>
        <!--Login-->
        <a href= "./login.html" class = "login">Login</a>
        </div>
    </header>
    <div class="display-body">
        <img src="./images/pylogo-2.png" alt="Welcome to PYWORKS!">
    </div>

    <script type = "module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-analytics.js";
            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries

            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
                apiKey: "AIzaSyAacuiuUfx9xPozqMnx2gjVhvlLrKDW8U8",
                authDomain: "pyz-test.firebaseapp.com",
                databaseURL: "https://pyz-test-default-rtdb.firebaseio.com",
                projectId: "pyz-test",
                storageBucket: "pyz-test.appspot.com",
                messagingSenderId: "1002244320159",
                appId: "1:1002244320159:web:e30ed55eb549fef3fc2baa",
                measurementId: "G-RDP6P39C09"
            };

            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const analytics = getAnalytics(app);
       
    
        import {onAuthStateChanged, getAuth} from "https://www.gstatic.com/firebasejs/10.5.0/firebase-auth.js";
            //Copy and Paste the URL from near the top of the CDN you pasted in from firebase
            // (the one where you imported "initializeApp" from),
            //but change "firebase-app" to "firebase-database"

        // Use the window.location or another method to extract the post ID from the URL

        // const urlParams = new URLSearchParams(window.location.search);
        // const postId = urlParams.get('id');
        // console.log(postId)
        // const auth = getAuth();

        // const currentUrl = window.location.href;
        // // const postId = currentUrl.get('id');
        // console.log(currentUrl);
        // console.log(postId);

        // Reference to your Firebase database

        const loginButton = document.querySelector('.login');
        const auth = getAuth();


        onAuthStateChanged(auth, (user) => {
            if (user){ //Only if the user is signed in 
                loginButton.innerHTML = "View Profile";
                loginButton.href = './user-profile.html'
                // var url = window.location.href;
                // console.log(url)
                // // url = "/login.html?loggedIn=true";
                // window.location.replace(url);

            } else{ //If user is not signed in

            }
        })
    </script>

    
</body>
</html>